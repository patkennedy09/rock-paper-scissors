<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>RPS</title>
    </head>
    <body>
        <h1>Rock Paper Scissors</h1>
        <script>
            // JaveScript goes here!
            
            //Goal: make this more consise!


            function computerPlay() {
                //This function will return 
                //rock, paper, or scissors, at random
                let num = Math.floor((Math.random() * 3) + 1);
                switch(num) {
                    case 1:
                        return "rock";
                    case 2:
                        return "paper";
                    case 3:
                        return "scissors";
                    default:
                        return "error";//this should never happen
                }
            }
            
            function playerPlay() {
                let raw = prompt("Type rock, paper, or scissors:", "");
                if (raw == null) {
                    return "canceled"
                } else {
                    return raw.toLowerCase(); 
                }
                   
            }

            function determineWinner(player, computer) {
                if (player == "rock") {
                    if (computer == "rock") {
                        console.log("It's a tie");
                        return "tie";
                    } else if (computer == "paper") {
                        console.log("You Lose! Paper beats Rock");
                        return "loss";
                    } else if (computer == "scissors") {
                        console.log("You Win! Rock beats Scissors");
                        return "win";
                    } else {
                        console.log("Something went terribly wrong");
                        return "error";
                    }
                } else if (player == "paper") {
                    if (computer == "rock") {
                        console.log("You Win! Paper beats Rock");
                        return "win";
                    } else if (computer == "paper") {
                        console.log("It's a tie");
                        return "tie";
                    } else if (computer == "scissors") {
                        console.log("You Lose! Scissors beats Paper");
                        return "loss";
                    } else {
                        console.log("Something went terribly wrong");
                        return "error";
                    }
                } else if (player == "scissors") {
                    if (computer == "rock") {
                        console.log("You Lose! Rock beats Scissors");
                        return "loss";
                    } else if (computer == "paper") {
                        console.log("You Win! Scissors beats Paper");
                        return "win";
                    } else if (computer == "scissors") {
                        console.log("It's a tie");
                        return "tie";
                    } else {
                        console.log("Something went terribly wrong");
                        return "error";
                    }
                } else {
                    console.log("You didn't provide a valid input, you dingus!");
                    return "bad input";
                }
            }

            function oneRound() {
                //User gets 5 attempts to enter a valid input
                let attempts = 0;
                while (attempts < 6) {
                    let computer = computerPlay();
                    let player = playerPlay();
                    if (player == "canceled") {
                        return player;
                    }
                    let result = determineWinner(player,computer);
                    if (result == "win" || result == "tie" || result == "loss") {
                        return result;
                    } else if (result == "bad input") {
                        //this should be a temporary thing
                        console.log("Follow directions");
                        attempts += 1;
                    } else {
                        console.log("error here.")
                        attempts += 1;
                    } 
                }
                console.log("You're recieving a loss for repeated failure to follow directions");
                return "loss";
      
            }

            function game() {
                let rounds = 5;
                let result = "";
                let wins = 0;
                let losses = 0;
                let ties = 0;
                let errors = 0;
                for (i=0; i<rounds; i++) {
                    result = oneRound();
                    switch(result) {
                        case "win":
                            wins += 1;
                            break;
                        case "loss":
                            losses += 1;
                            break;
                        case "tie":
                            ties += 1;
                            break;
                        case "canceled":
                            i = 6;
                            break;
                        default:
                            errors += 1;
                    }
                }
                console.log(`You had ${wins} wins, ${losses} losses, and ${ties} ties.`);
                if (errors > 0) {
                    console.log(`You had ${errors} errors`);
                }
                
            }

            
            function testrng(j) {
                let one = 0;
                let two = 0;
                let three = 0;
                let other = 0;
                let temp;
                for (i = 0; i < j; i++) {
                    temp = computerPlay();
                    switch(temp) {
                        case 1:
                            one+=1;
                            break;
                        case 2:
                            two+=1;
                            break;
                        case 3:
                            three+=1;
                            break;
                        default:
                            other+=1;
                    }
                }
                console.log("one: " + one);
                console.log("two: " + two);
                console.log("three: " + three);
                console.log("failures: " + other);
            }
            
        </script>
    </body>
</html>